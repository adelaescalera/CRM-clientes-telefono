<div class="buses-container">
  <h2>Seleccionar L√≠nea</h2>

  <div class="linea-selector">
    <select
      [(ngModel)]="lineaSeleccionada"
      (change)="onLineaChange($event)"
      class="form-select linea-select"
    >
      <option value="" disabled selected>-- Selecciona una l√≠nea --</option>
      <option *ngFor="let linea of lineas" [value]="linea.codLinea">
        üöç {{ linea.nombreLinea }}
      </option>
    </select>

    <button
      *ngIf="lineaSeleccionada"
      class="btn-clear"
      (click)="limpiarMarkers()"
      title="Limpiar selecci√≥n"
    >
      X
    </button>
  </div>

  <div id="map" style="height: 400px; margin-top: 1rem;"></div>

<div *ngIf="paradaSeleccionadaData" class="info-panel-container">
  <p-panel [style]="{'width': '350px'}">
    
    <ng-template pTemplate="header">
      <div class="panel-header">
        <span class="p-panel-title">Detalle de Parada</span>
        <button 
          pButton 
          type="button" 
          icon="pi pi-times" 
          class="p-button-secondary p-button-text" 
          (click)="cerrarPanel()">
        </button>
      </div>
    </ng-template>

    <ng-template pTemplate="content">
      <h3>{{ paradaSeleccionadaData.nombreParada }}</h3>
      <p><strong>Direcci√≥n:</strong> {{ paradaSeleccionadaData.direccion || 'No disponible' }}</p>
      
      <hr>

      <h4>L√≠neas que pasan por aqu√≠:</h4>

      <div *ngIf="lineasDeParada === null">
        <p>Cargando l√≠neas...</p>
      </div>

      <div *ngIf="lineasDeParada !== null">
        
        <div *ngIf="lineasDeParada.length === 0">
          <p>No se encontraron l√≠neas para esta parada.</p>
        </div>
        
        <ul class="lineas-list" *ngIf="lineasDeParada.length > 0">
          <li *ngFor="let linea of lineasDeParada">
            <span class="linea-codigo">({{ linea.codLinea }})</span> 
            {{ linea.nombreLinea }}
          </li>
        </ul>

      </div>
    </ng-template>

  </p-panel>
</div>

</div>